<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="theme-color" content="#05324d" />

    <title>Shared birthdays | DC Coding</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Rubik:ital,wght@0,400;0,700;1,400;1,700&family=Trirong:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="/assets/css/code.css" />

    <link
      rel="alternate"
      type="application/rss+xml"
      title="RSS Feed for DC Coding"
      href="/Feed/"
    />
  </head>

  <body class="flex min-h-screen flex-col bg-gray-100">
    <nav class="bg-gray-800">
      <div class="container flex flex-row justify-center px-6">
        
        <a
          class="px-4 py-2 text-lg text-gray-100 hover:bg-gray-700 hover:underline"
          href="/"
          >Home</a
        >
        
        <a
          class="px-4 py-2 text-lg text-gray-100 hover:bg-gray-700 hover:underline"
          href="/Archive"
          >Archive</a
        >
        
        <a
          class="px-4 py-2 text-lg text-gray-100 hover:bg-gray-700 hover:underline"
          href="/About"
          >About</a
        >
        
      </div>
    </nav>

    
 <div class="bg-blue-800">
  <div class="container py-8">
    <h1 class="font-title text-5xl font-bold italic text-gray-50">
      Shared birthdays
    </h1>
    
    <p class="mt-2 text-lg text-gray-200"> 7 August 2025</p>
    
  </div>
</div>


<div class="container py-6">
  <p class="mb-6 text-3xl italic text-gray-500">What's the chance of three people sharing a birthday within a week?</p>

  <article class="prose"><p>Last week my wife and I were volunteering on a <a href="https://www.dorsetventure.org.uk/">Christian youth
camp</a> in Studland, Dorset.</p>
<p><img src="/assets/images/2025-08-07-birthdays/dorset-venture.jpg" alt="Dorset Venture
campsite"></p>
<p>If it's anyone's birthday during the week we like to celebrate it, and it turned
out that on one of the days it was the birthday of three people! This seemed
like an unlikely occurrence, so I decided to work out the chances of this
happening.</p>
<p><a href="/2019/03/14/champions-league-draw/">Previously on this blog</a> I've calculated
probabilities for an event like this using both maths (work out the exact
probability) and simulation (randomly run it lots of times and count how often
it occurs). In this case the maths seems very complicated, so I'm going to
estimate the probability using simulation.</p>
<p>Recently on this blog I've been investigating the interaction between randomness
and functional programming (in my series called <a href="/2024/12/18/PGF-00/#list-of-posts">ProcGen
Fun</a>), with the fundamental concept being
that of a distribution. The code in this post builds on top of what I've already
done, and you can find the whole thing on <a href="https://github.com/djcarter85/ProcGenFun/tree/birthdays">the <code>birthdays</code> branch in the same
repository</a>.</p>
<p><em>(NB: if you're not interested in the code, you can <a href="#results">skip straight to the
results</a>!)</em></p>
<h2>Birthday distribution</h2>
<p>First off I need a way of selecting a single random birthday. In practice
<a href="https://www.ons.gov.uk/peoplepopulationandcommunity/birthsdeathsandmarriages/livebirths/articles/howpopularisyourbirthday/2015-12-18">birthdays are not evenly distributed throughout the
year</a>,
but for now let's assume they are and ignore leap years.</p>
<p>The simplest way to build a distribution of birthdays is to use a uniform
distribution of dates in the current year. I can do this by taking a uniform
distribution of numbers between 0 and 364 and adding that number of days to 1st
January.</p>
<pre class="language-cs"><code class="language-cs"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IDistribution<span class="token punctuation">&lt;</span>LocalDate<span class="token punctuation">></span></span> <span class="token function">BirthdayDist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token keyword">from</span> offset <span class="token keyword">in</span> Uniform<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">365</span><span class="token punctuation">)</span>
    <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LocalDate</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">01</span><span class="token punctuation">,</span> <span class="token number">01</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">PlusDays</span><span class="token punctuation">(</span>offset<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>Distribution of a set of birthdays</h2>
<p>On our camp we had 71 people, and so to represent that I can sample from my
distribution 71 times. I've already written a method for this called <code>Repeat</code>,
so I'll use that.</p>
<pre class="language-cs"><code class="language-cs"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IDistribution<span class="token punctuation">&lt;</span>IEnumerable<span class="token punctuation">&lt;</span>LocalDate<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">BirthdaySetDist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token function">BirthdayDist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Repeat</span><span class="token punctuation">(</span><span class="token number">71</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>Checking for three people with the same birthday</h2>
<p>I now need a way of determining whether a given set of 71 birthdays contains a
three-way shared birthday during the nine days of camp. To do this I can filter
the birthdays to only ones which occur during camp, and then see if there's a
group of three or more.</p>
<pre class="language-cs"><code class="language-cs"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ThreePeopleShareBirthdayOnCamp</span><span class="token punctuation">(</span>
    <span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>LocalDate<span class="token punctuation">></span></span> birthdays<span class="token punctuation">)</span> <span class="token operator">=></span>
    birthdays
        <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>b <span class="token operator">=></span>
            b <span class="token operator">>=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LocalDate</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">07</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
            b <span class="token operator">&lt;=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LocalDate</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">08</span><span class="token punctuation">,</span> <span class="token number">03</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">GroupBy</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>g <span class="token operator">=></span> g<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>Estimating probabilities</h2>
<p>In order to estimate the probability of a particular event within a certain
distribution, I can sample from the distribution a large number of times and
then count how many times the event occurs.</p>
<p>This is a very general idea so I've written a general method for it. Notice that
the return value is a distribution - this represents the fact that each time I
run the simulation I might get a different result. As it's only an estimate,
this is expected.</p>
<pre class="language-cs"><code class="language-cs"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IDistribution<span class="token punctuation">&lt;</span><span class="token keyword">double</span><span class="token punctuation">></span></span> <span class="token generic-method"><span class="token function">EstimateProbability</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
    <span class="token keyword">this</span> <span class="token class-name">IDistribution<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span> dist<span class="token punctuation">,</span>
    <span class="token class-name">Func<span class="token punctuation">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">></span></span> predicate<span class="token punctuation">,</span>
    <span class="token class-name"><span class="token keyword">int</span></span> sampleCount<span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token keyword">from</span> samples <span class="token keyword">in</span> dist<span class="token punctuation">.</span><span class="token function">Repeat</span><span class="token punctuation">(</span>sampleCount<span class="token punctuation">)</span>
    <span class="token keyword">select</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>samples<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span>predicate<span class="token punctuation">)</span> <span class="token operator">/</span> sampleCount<span class="token punctuation">;</span></code></pre>
<h2>Putting it all together</h2>
<p>I have all the components I need, so it's now a case of putting them together.
I've chosen to run the simulation 1 million times; this is probably overkill,
but it only took around ten seconds to run on my computer.</p>
<pre class="language-cs"><code class="language-cs"><span class="token class-name"><span class="token keyword">var</span></span> probabilityDist <span class="token operator">=</span> Birthdays<span class="token punctuation">.</span><span class="token function">BirthdaySetDist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">EstimateProbability</span><span class="token punctuation">(</span>
        Birthdays<span class="token punctuation">.</span>ThreePeopleShareBirthdayOnCamp<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">sampleCount</span><span class="token punctuation">:</span> <span class="token number">1_000_000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> rng <span class="token operator">=</span> StandardRng<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> probability <span class="token operator">=</span> probabilityDist<span class="token punctuation">.</span><span class="token function">Sample</span><span class="token punctuation">(</span>rng<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2><a name="results"></a> Results</h2>
<p>When I ran this it gave me a probability of <strong>0.93%</strong>. That is, you'd expect this to
happen only once every 107 years!</p>
<p>Now that I've got an initial working version of the code, I can make some
changes to find some related probabilities. For example:</p>
<ul>
<li>I can change the size of the group</li>
<li>I can change the number of shared birthdays I'm looking for</li>
<li>I can remove the restriction that the shared birthday must happen during camp
(i.e. it counts even even if the shared birthday is at some other point in the
year)</li>
</ul>
<p>Here are some of the results I found for a group of 71 people:</p>
<ul>
<li>The chance of two people sharing a birthday (at any point in the year) is
<strong>99.93%</strong> (i.e. virtually guaranteed).</li>
<li>The chance of two people sharing a birthday during camp is <strong>13.97%</strong> (i.e. it'll
happen once every 7 years or so).</li>
<li>The chance of three people sharing a birthday (at any point in the year) is
<strong>31.61%</strong> (i.e. it'll happen once every 3 years or so).</li>
</ul>
<p>It's reasonably well-known that in a group of 23 people there's about a 50-50
chance that two of them will share a birthday (it's called the <a href="https://en.wikipedia.org/wiki/Birthday_problem">birthday
paradox</a>). So as a final sanity
check of my calculations I ran it for 23 people and two shared birthdays, and,
sure enough, the result came out to 50.71%. Phew!</p>
</article>
</div>

<div class="container py-6">
  <script
    src="https://utteranc.es/client.js"
    repo="djcarter85/codingblog"
    issue-term="url"
    label="comments"
    theme="github-light"
    crossorigin="anonymous"
    async
  ></script>
</div>


    <footer class="footer mt-auto bg-blue-800 py-4 text-gray-50">
      <div class="container flex flex-col gap-2">
        <div class="flex flex-row justify-center gap-4">
          
          <a
            class="rounded-lg p-2 hover:bg-blue-500"
            href="https://github.com/djcarter85"
            title="GitHub"
          >
            <i class="fab fa-github fa-2x"></i>
          </a>
          
          <a
            class="rounded-lg p-2 hover:bg-blue-500"
            href="/Feed/"
            title="RSS"
          >
            <i class="fa fa-rss fa-2x"></i>
          </a>
          
        </div>
        <div class="text-center">
          &copy; Dan Carter 2025
        </div>
      </div>
    </footer>

    <!-- JS -->
    <script
      defer
      src="https://use.fontawesome.com/releases/v5.6.3/js/all.js"
      integrity="sha384-EIHISlAOj4zgYieurP0SdoiBYfGJKkgWedPHH4jCzpCXLmzVsw1ouK59MuUtP4a1"
      crossorigin="anonymous"
    ></script>

    <script
      type="text/javascript"
      async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
    ></script>
  </body>
</html>
